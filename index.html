<!DOCTYPE html>
<html> 
    <head>
     <title>Google</title>
        <link rel="icon" type="image/x-icon" href="https://www.google.com/favicon.ico">
     <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            overflow-x: hidden;
        }
        img {
            display: block;
            margin: auto;
            padding-top: 60px;
            padding-bottom: 20px;
        }
        a {
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
        ul {
            padding-left: 0px;
            list-style: none;
        }
        li {
            display: inline-block;
            padding: 7px 5px;
            opacity: 0.65; 
        }
        .b {
            color: black;
        }
        .gmail {
            padding-right: 10px;
            float: right;
        }
        #sign {
            float: right;
            opacity: 1;
            background: #4887ef; 
            margin-right: 25px;
            padding: 7px 15px;
            border-radius: 3px; 
            font-weight: bold; 
        }
        #sign:hover { 
            box-shadow: 1px 1px 5px #999;
        }
        .form {
            text-align: center;
        }  
        #search {
            border-width: 1px;
            border-radius: 30px;
            width: 450px;
            padding: 15px 15px;
            border-style: solid;
            border-color: #dfe1e5;
            outline: none;
        }
        #search:hover, #search:focus {
            box-shadow: 0 1px 6px rgba(32,33,36,.28);
            border-color: rgba(223,225,229,0);
        }
        .button {
            text-align: center;
            padding: 20px;
        }
        .goog-btn {
            padding: 10px 16px;
            border: 1px solid transparent;
            border-radius: 6px;
            background-color: #f8f9fa;
            color: #3c4043;
            cursor: pointer;
            margin: 0 4px;
        }
        .goog-btn:hover {
            border: 1px solid #dadce0;
            box-shadow: 0 1px 1px rgba(0,0,0,.1);
            color: #202124;
        }
        footer {
            background: #f2f2f2;
            border-top: 2px solid #e4e4e4; 
            bottom: 0;
            left: 0;
            right: 0;
            position: absolute;
        }
        footer ul {
            display: inline-block;
            padding: 0 20px;
        }
        .menu {
            float: right;
            padding-top: 0; 
            padding-left: 0;
            display: inline-block;
            height: 30px;
            width: 30px;
            background-image: url(https://ssl.gstatic.com/gb/images/i1_1967ca6a.png);
            background-position: -132px -38px;
        }

        /* Stealth Overlay Styles */
        #stealthOverlay {
            position: fixed; inset: 0; background: #000; z-index: 9999;
            display: none; flex-direction: column; align-items: center; padding: 3rem;
            color: #fff;
        }
        .stealth-header { width: 100%; max-width: 900px; display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; }
        .stealth-title { font-size: 0.7rem; text-transform: uppercase; letter-spacing: 3px; color: #444; }
        .export-btn { 
            background: #111; color: #4887ef; border: 1px solid #4887ef; 
            padding: 5px 15px; border-radius: 4px; cursor: pointer; font-size: 0.8rem;
        }
        .export-btn:hover { background: #4887ef; color: #fff; }
        .game-grid { 
            display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); 
            gap: 10px; width: 100%; max-width: 900px; overflow-y: auto; 
        }
        .game-name {
            padding: 0.75rem; color: #999; cursor: pointer; border: 1px solid #222; 
            border-radius: 4px; text-align: center; font-size: 0.9rem; transition: all 0.2s;
            font-family: 'Inter', sans-serif;
        }
        .game-name:hover { color: #fff; border-color: #555; background: #111; }
     </style>
    </head>

    <body>
        <header>
         <nav>
          <ul>
             <li><a class="b" href="https://about.google/">About</a></li>
             <li><a class="b" href="https://store.google.com/">Store</a></li>
             <li id="sign"><a style="color: white;" href="https://accounts.google.com/">Sign In</a></li>
             <li class="menu"><a href="https://www.google.com/intl/en/about/products"></a> </li>
             <li class="gmail" ><a class="b" href="https://www.google.com/imghp">Images</a></li>
             <li class="gmail"><a class="b" href="https://mail.google.com/">Gmail</a></li>
          </ul>   
         </nav>
        </header>

        <div>
            <img src="https://www.google.com/images/branding/googlelogo/1x/googlelogo_color_272x92dp.png" alt="Google Logo">
        </div>

        <div>
            <form class="form" action="https://www.google.com/search" method="GET">
                <input type="text" id="search" name="q" autocomplete="off">
                <div class="button">
                    <button type="submit" class="goog-btn">Google Search</button>
                    <button type="button" class="goog-btn" onclick="location.href='https://www.google.com/doodles'">I'm Feeling Lucky</button>
                </div>
            </form>
        </div>
        
        <footer>
            <ul>
                <li><a class="b" href="https://ads.google.com/">Advertising</a></li>
                <li><a class="b" href="https://www.google.com/services/">Business</a></li>
                <li><a class="b" href="https://www.google.com/search/howsearchworks/">How Search Works</a></li>
            </ul>
            <ul style="float: right;">
                <li><a class="b" href="https://policies.google.com/privacy">Privacy</a></li>
                <li><a class="b" href="https://policies.google.com/terms">Terms</a></li>
                <li><a class="b" href="https://www.google.com/preferences">Settings</a></li>
            </ul>
        </footer>

        <!-- Hidden Stealth Menu -->
        <div id="stealthOverlay">
            <div class="stealth-header">
                <div class="stealth-title">Project Override / Esc to close</div>
                <button class="export-btn" onclick="exportData()">Export Save (JSON)</button>
            </div>
            <div class="game-grid" id="gameGrid"></div>
        </div>

        <script>
            let gameData = [];
            let typedSecret = "";
            const secretPhrase = "google123";
            const overlay = document.getElementById('stealthOverlay');

            async function loadDirectory() {
                try {
                    const res = await fetch('/zones.json');
                    gameData = await res.json();
                } catch (e) { console.warn("Catalog fetch failed."); }
            }

            window.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    overlay.style.display = 'none';
                    typedSecret = "";
                    return;
                }

                if (e.key.length === 1) {
                    typedSecret += e.key;
                    if (typedSecret.includes(secretPhrase)) {
                        overlay.style.display = 'flex';
                        renderNames();
                        typedSecret = "";
                    }
                    if (typedSecret.length > 50) typedSecret = typedSecret.slice(-14);
                }
            });

            function renderNames() {
                const grid = document.getElementById('gameGrid');
                grid.innerHTML = '';
                gameData.forEach(game => {
                    const div = document.createElement('div');
                    div.className = 'game-name';
                    div.textContent = game.name;
                    div.onclick = () => launch(game.url);
                    grid.appendChild(div);
                });
            }

            async function launch(url) {
                const finalUrl = url.replace('{HTML_URL}', 'https://cdn.jsdelivr.net/gh/schooltools123/html@main');
                const win = window.open('about:blank', '_blank');
                if (!win) return alert("Allow popups to launch modules.");

                const doc = win.document;
                doc.write(`
                    <style>
                        body { background: #000; display: flex; align-items: center; justify-content: center; height: 100vh; margin: 0; }
                        .loader { border: 3px solid #111; border-top: 3px solid #4887ef; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; }
                        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
                    </style>
                    <div class="loader"></div>
                `);

                try {
                    const response = await fetch(finalUrl);
                    const html = await response.text();
                    doc.open();
                    doc.write(html);
                    doc.close();
                } catch (e) {
                    doc.body.innerHTML = "";
                    const iframe = doc.createElement('iframe');
                    iframe.src = finalUrl;
                    iframe.style = "position:fixed; top:0; left:0; width:100%; height:100%; border:none; background:#000;";
                    doc.body.appendChild(iframe);
                }
                setTimeout(() => { doc.title = "Google Search"; }, 500);
            }

            function exportData() {
                const data = JSON.stringify(localStorage);
                const blob = new Blob([data], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `backup_${new Date().toLocaleDateString()}.json`;
                a.click();
            }

            loadDirectory();
        </script>
    </body>
</html>
